{"dependencies":[{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"],"imports":1}},{"name":"./ExpoLocation","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":42,"index":42}}],"key":"n9eQB3huKj/lRnIsgaXRKPJKjaY=","exportNames":["*"],"imports":1}},{"name":"./LocationEventEmitter","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":43},"end":{"line":2,"column":62,"index":105}}],"key":"38XLRnQdDBx35ZID4eB8duhAnLg=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"LocationSubscriber\", {\n    enumerable: true,\n    get: function () {\n      return LocationSubscriber;\n    }\n  });\n  Object.defineProperty(exports, \"HeadingSubscriber\", {\n    enumerable: true,\n    get: function () {\n      return HeadingSubscriber;\n    }\n  });\n  Object.defineProperty(exports, \"LocationErrorSubscriber\", {\n    enumerable: true,\n    get: function () {\n      return LocationErrorSubscriber;\n    }\n  });\n  exports._getCurrentWatchId = _getCurrentWatchId;\n  var _babelRuntimeHelpersClassCallCheck = require(_dependencyMap[0], \"@babel/runtime/helpers/classCallCheck\");\n  var _classCallCheck = _interopDefault(_babelRuntimeHelpersClassCallCheck);\n  var _babelRuntimeHelpersCreateClass = require(_dependencyMap[1], \"@babel/runtime/helpers/createClass\");\n  var _createClass = _interopDefault(_babelRuntimeHelpersCreateClass);\n  var _ExpoLocation = require(_dependencyMap[2], \"./ExpoLocation\");\n  var ExpoLocation = _interopDefault(_ExpoLocation);\n  var _LocationEventEmitter = require(_dependencyMap[3], \"./LocationEventEmitter\");\n  var nextWatchId = 0;\n  var Subscriber = /*#__PURE__*/function () {\n    function Subscriber(eventName, eventDataField) {\n      (0, _classCallCheck.default)(this, Subscriber);\n      this.callbacks = {};\n      this.eventSubscription = null;\n      this.eventName = eventName;\n      this.eventDataField = eventDataField;\n    }\n    return (0, _createClass.default)(Subscriber, [{\n      key: \"maybeInitializeSubscription\",\n      value: function maybeInitializeSubscription() {\n        if (this.eventSubscription) {\n          return;\n        }\n        this.eventSubscription = _LocationEventEmitter.LocationEventEmitter.addListener(this.eventName, event => this.trigger(event));\n      }\n      /**\n       * Registers given callback under new id which is then returned.\n       */\n    }, {\n      key: \"registerCallback\",\n      value: function registerCallback(callback) {\n        this.maybeInitializeSubscription();\n        var id = ++nextWatchId;\n        this.callbacks[id] = callback;\n        return id;\n      }\n      /**\n       * Registers given callback under and existing id. This can be used to\n       * create a subscriber for the error event on the same id as the location\n       * event is subscribed to.\n       */\n    }, {\n      key: \"registerCallbackForId\",\n      value: function registerCallbackForId(watchId, callback) {\n        this.maybeInitializeSubscription();\n        var id = watchId;\n        this.callbacks[id] = callback;\n        return id;\n      }\n      /**\n       * Unregisters a callback with given id and revokes the subscription if possible.\n       */\n    }, {\n      key: \"unregisterCallback\",\n      value: function unregisterCallback(id) {\n        // Do nothing if we have already unregistered the callback.\n        if (!this.callbacks[id]) {\n          return;\n        }\n        delete this.callbacks[id];\n        ExpoLocation.default.removeWatchAsync(id);\n        if (Object.keys(this.callbacks).length === 0 && this.eventSubscription) {\n          _LocationEventEmitter.LocationEventEmitter.removeSubscription(this.eventSubscription);\n          this.eventSubscription = null;\n        }\n      }\n    }, {\n      key: \"trigger\",\n      value: function trigger(event) {\n        var watchId = event.watchId;\n        var callback = this.callbacks[watchId];\n        if (callback) {\n          callback(event[this.eventDataField]);\n        } else {\n          ExpoLocation.default.removeWatchAsync(watchId);\n        }\n      }\n    }]);\n  }();\n  var LocationSubscriber = new Subscriber('Expo.locationChanged', 'location');\n  var HeadingSubscriber = new Subscriber('Expo.headingChanged', 'heading');\n  var LocationErrorSubscriber = new Subscriber('Expo.locationError', 'reason');\n  /**\n   * @private Necessary for some unit tests.\n   */\n  function _getCurrentWatchId() {\n    return nextWatchId;\n  }\n});","lineCount":118,"map":[[12,2,65,0,"Object"],[12,8,65,0],[12,9,65,0,"defineProperty"],[12,23,65,0],[12,24,65,0,"exports"],[12,31,65,0],[13,4,65,0,"enumerable"],[13,14,65,0],[14,4,65,0,"get"],[14,7,65,0],[14,18,65,0,"get"],[14,19,65,0],[15,6,65,0],[15,13,65,0,"LocationSubscriber"],[15,31,65,0],[16,4,65,0],[17,2,65,0],[18,2,66,0,"Object"],[18,8,66,0],[18,9,66,0,"defineProperty"],[18,23,66,0],[18,24,66,0,"exports"],[18,31,66,0],[19,4,66,0,"enumerable"],[19,14,66,0],[20,4,66,0,"get"],[20,7,66,0],[20,18,66,0,"get"],[20,19,66,0],[21,6,66,0],[21,13,66,0,"HeadingSubscriber"],[21,30,66,0],[22,4,66,0],[23,2,66,0],[24,2,67,0,"Object"],[24,8,67,0],[24,9,67,0,"defineProperty"],[24,23,67,0],[24,24,67,0,"exports"],[24,31,67,0],[25,4,67,0,"enumerable"],[25,14,67,0],[26,4,67,0,"get"],[26,7,67,0],[26,18,67,0,"get"],[26,19,67,0],[27,6,67,0],[27,13,67,0,"LocationErrorSubscriber"],[27,36,67,0],[28,4,67,0],[29,2,67,0],[30,2,71,0,"exports"],[30,9,71,0],[30,10,71,0,"_getCurrentWatchId"],[30,28,71,0],[30,31,71,0,"_getCurrentWatchId"],[30,49,71,0],[31,2,73,1],[31,6,73,1,"_babelRuntimeHelpersClassCallCheck"],[31,40,73,1],[31,43,73,1,"require"],[31,50,73,1],[31,51,73,1,"_dependencyMap"],[31,65,73,1],[32,2,73,1],[32,6,73,1,"_classCallCheck"],[32,21,73,1],[32,24,73,1,"_interopDefault"],[32,39,73,1],[32,40,73,1,"_babelRuntimeHelpersClassCallCheck"],[32,74,73,1],[33,2,73,1],[33,6,73,1,"_babelRuntimeHelpersCreateClass"],[33,37,73,1],[33,40,73,1,"require"],[33,47,73,1],[33,48,73,1,"_dependencyMap"],[33,62,73,1],[34,2,73,1],[34,6,73,1,"_createClass"],[34,18,73,1],[34,21,73,1,"_interopDefault"],[34,36,73,1],[34,37,73,1,"_babelRuntimeHelpersCreateClass"],[34,68,73,1],[35,2,1,0],[35,6,1,0,"_ExpoLocation"],[35,19,1,0],[35,22,1,0,"require"],[35,29,1,0],[35,30,1,0,"_dependencyMap"],[35,44,1,0],[36,2,1,0],[36,6,1,0,"ExpoLocation"],[36,18,1,0],[36,21,1,0,"_interopDefault"],[36,36,1,0],[36,37,1,0,"_ExpoLocation"],[36,50,1,0],[37,2,2,0],[37,6,2,0,"_LocationEventEmitter"],[37,27,2,0],[37,30,2,0,"require"],[37,37,2,0],[37,38,2,0,"_dependencyMap"],[37,52,2,0],[38,2,3,0],[38,6,3,4,"nextWatchId"],[38,17,3,15],[38,20,3,18],[38,21,3,19],[39,2,3,20],[39,6,4,6,"Subscriber"],[39,16,4,16],[40,4,9,4],[40,13,9,4,"Subscriber"],[40,24,9,16,"eventName"],[40,33,9,25],[40,35,9,27,"eventDataField"],[40,49,9,41],[40,51,9,43],[41,6,9,43],[41,10,9,43,"_classCallCheck"],[41,25,9,43],[41,26,9,43,"default"],[41,33,9,43],[41,41,9,43,"Subscriber"],[41,51,9,43],[42,6,9,43],[42,11,7,4,"callbacks"],[42,20,7,13],[42,23,7,16],[42,24,7,17],[42,25,7,18],[43,6,7,18],[43,11,8,4,"eventSubscription"],[43,28,8,21],[43,31,8,24],[43,35,8,28],[44,6,10,8],[44,10,10,12],[44,11,10,13,"eventName"],[44,20,10,22],[44,23,10,25,"eventName"],[44,32,10,34],[45,6,11,8],[45,10,11,12],[45,11,11,13,"eventDataField"],[45,25,11,27],[45,28,11,30,"eventDataField"],[45,42,11,44],[46,4,12,4],[47,4,12,5],[47,15,12,5,"_createClass"],[47,27,12,5],[47,28,12,5,"default"],[47,35,12,5],[47,37,12,5,"Subscriber"],[47,47,12,5],[48,6,12,5,"key"],[48,9,12,5],[49,6,12,5,"value"],[49,11,12,5],[49,13,13,4],[49,22,13,4,"maybeInitializeSubscription"],[49,49,13,31,"maybeInitializeSubscription"],[49,50,13,31],[49,52,13,34],[50,8,14,8],[50,12,14,12],[50,16,14,16],[50,17,14,17,"eventSubscription"],[50,34,14,34],[50,36,14,36],[51,10,15,12],[52,8,16,8],[53,8,17,8],[53,12,17,12],[53,13,17,13,"eventSubscription"],[53,30,17,30],[53,33,17,33,"LocationEventEmitter"],[53,54,17,53],[53,55,17,53,"LocationEventEmitter"],[53,75,17,53],[53,76,17,54,"addListener"],[53,87,17,65],[53,88,17,66],[53,92,17,70],[53,93,17,71,"eventName"],[53,102,17,80],[53,104,17,83,"event"],[53,109,17,88],[53,113,17,93],[53,117,17,97],[53,118,17,98,"trigger"],[53,125,17,105],[53,126,17,106,"event"],[53,131,17,111],[53,132,17,112],[53,133,17,113],[54,6,18,4],[55,6,19,4],[56,0,20,0],[57,0,21,0],[58,4,19,4],[59,6,19,4,"key"],[59,9,19,4],[60,6,19,4,"value"],[60,11,19,4],[60,13,22,4],[60,22,22,4,"registerCallback"],[60,38,22,20,"registerCallback"],[60,39,22,21,"callback"],[60,47,22,29],[60,49,22,31],[61,8,23,8],[61,12,23,12],[61,13,23,13,"maybeInitializeSubscription"],[61,40,23,40],[61,41,23,41],[61,42,23,42],[62,8,24,8],[62,12,24,14,"id"],[62,14,24,16],[62,17,24,19],[62,19,24,21,"nextWatchId"],[62,30,24,32],[63,8,25,8],[63,12,25,12],[63,13,25,13,"callbacks"],[63,22,25,22],[63,23,25,23,"id"],[63,25,25,25],[63,26,25,26],[63,29,25,29,"callback"],[63,37,25,37],[64,8,26,8],[64,15,26,15,"id"],[64,17,26,17],[65,6,27,4],[66,6,28,4],[67,0,29,0],[68,0,30,0],[69,0,31,0],[70,0,32,0],[71,4,28,4],[72,6,28,4,"key"],[72,9,28,4],[73,6,28,4,"value"],[73,11,28,4],[73,13,33,4],[73,22,33,4,"registerCallbackForId"],[73,43,33,25,"registerCallbackForId"],[73,44,33,26,"watchId"],[73,51,33,33],[73,53,33,35,"callback"],[73,61,33,43],[73,63,33,45],[74,8,34,8],[74,12,34,12],[74,13,34,13,"maybeInitializeSubscription"],[74,40,34,40],[74,41,34,41],[74,42,34,42],[75,8,35,8],[75,12,35,14,"id"],[75,14,35,16],[75,17,35,19,"watchId"],[75,24,35,26],[76,8,36,8],[76,12,36,12],[76,13,36,13,"callbacks"],[76,22,36,22],[76,23,36,23,"id"],[76,25,36,25],[76,26,36,26],[76,29,36,29,"callback"],[76,37,36,37],[77,8,37,8],[77,15,37,15,"id"],[77,17,37,17],[78,6,38,4],[79,6,39,4],[80,0,40,0],[81,0,41,0],[82,4,39,4],[83,6,39,4,"key"],[83,9,39,4],[84,6,39,4,"value"],[84,11,39,4],[84,13,42,4],[84,22,42,4,"unregisterCallback"],[84,40,42,22,"unregisterCallback"],[84,41,42,23,"id"],[84,43,42,25],[84,45,42,27],[85,8,43,8],[86,8,44,8],[86,12,44,12],[86,13,44,13],[86,17,44,17],[86,18,44,18,"callbacks"],[86,27,44,27],[86,28,44,28,"id"],[86,30,44,30],[86,31,44,31],[86,33,44,33],[87,10,45,12],[88,8,46,8],[89,8,47,8],[89,15,47,15],[89,19,47,19],[89,20,47,20,"callbacks"],[89,29,47,29],[89,30,47,30,"id"],[89,32,47,32],[89,33,47,33],[90,8,48,8,"ExpoLocation"],[90,20,48,20],[90,21,48,20,"default"],[90,28,48,20],[90,29,48,21,"removeWatchAsync"],[90,45,48,37],[90,46,48,38,"id"],[90,48,48,40],[90,49,48,41],[91,8,49,8],[91,12,49,12,"Object"],[91,18,49,18],[91,19,49,19,"keys"],[91,23,49,23],[91,24,49,24],[91,28,49,28],[91,29,49,29,"callbacks"],[91,38,49,38],[91,39,49,39],[91,40,49,40,"length"],[91,46,49,46],[91,51,49,51],[91,52,49,52],[91,56,49,56],[91,60,49,60],[91,61,49,61,"eventSubscription"],[91,78,49,78],[91,80,49,80],[92,10,50,12,"LocationEventEmitter"],[92,31,50,32],[92,32,50,32,"LocationEventEmitter"],[92,52,50,32],[92,53,50,33,"removeSubscription"],[92,71,50,51],[92,72,50,52],[92,76,50,56],[92,77,50,57,"eventSubscription"],[92,94,50,74],[92,95,50,75],[93,10,51,12],[93,14,51,16],[93,15,51,17,"eventSubscription"],[93,32,51,34],[93,35,51,37],[93,39,51,41],[94,8,52,8],[95,6,53,4],[96,4,53,5],[97,6,53,5,"key"],[97,9,53,5],[98,6,53,5,"value"],[98,11,53,5],[98,13,54,4],[98,22,54,4,"trigger"],[98,29,54,11,"trigger"],[98,30,54,12,"event"],[98,35,54,17],[98,37,54,19],[99,8,55,8],[99,12,55,14,"watchId"],[99,19,55,21],[99,22,55,24,"event"],[99,27,55,29],[99,28,55,30,"watchId"],[99,35,55,37],[100,8,56,8],[100,12,56,14,"callback"],[100,20,56,22],[100,23,56,25],[100,27,56,29],[100,28,56,30,"callbacks"],[100,37,56,39],[100,38,56,40,"watchId"],[100,45,56,47],[100,46,56,48],[101,8,57,8],[101,12,57,12,"callback"],[101,20,57,20],[101,22,57,22],[102,10,58,12,"callback"],[102,18,58,20],[102,19,58,21,"event"],[102,24,58,26],[102,25,58,27],[102,29,58,31],[102,30,58,32,"eventDataField"],[102,44,58,46],[102,45,58,47],[102,46,58,48],[103,8,59,8],[103,9,59,9],[103,15,60,13],[104,10,61,12,"ExpoLocation"],[104,22,61,24],[104,23,61,24,"default"],[104,30,61,24],[104,31,61,25,"removeWatchAsync"],[104,47,61,41],[104,48,61,42,"watchId"],[104,55,61,49],[104,56,61,50],[105,8,62,8],[106,6,63,4],[107,4,63,5],[108,2,63,5],[109,2,65,7],[109,6,65,13,"LocationSubscriber"],[109,24,65,31],[109,27,65,34],[109,31,65,38,"Subscriber"],[109,41,65,48],[109,42,65,49],[109,64,65,71],[109,66,65,73],[109,76,65,83],[109,77,65,84],[110,2,66,7],[110,6,66,13,"HeadingSubscriber"],[110,23,66,30],[110,26,66,33],[110,30,66,37,"Subscriber"],[110,40,66,47],[110,41,66,48],[110,62,66,69],[110,64,66,71],[110,73,66,80],[110,74,66,81],[111,2,67,7],[111,6,67,13,"LocationErrorSubscriber"],[111,29,67,36],[111,32,67,39],[111,36,67,43,"Subscriber"],[111,46,67,53],[111,47,67,54],[111,67,67,74],[111,69,67,76],[111,77,67,84],[111,78,67,85],[112,2,68,0],[113,0,69,0],[114,0,70,0],[115,2,71,7],[115,11,71,16,"_getCurrentWatchId"],[115,29,71,34,"_getCurrentWatchId"],[115,30,71,34],[115,32,71,37],[116,4,72,4],[116,11,72,11,"nextWatchId"],[116,22,72,22],[117,2,73,0],[118,0,73,1],[118,3]],"functionMap":{"names":["<global>","Subscriber","Subscriber#constructor","Subscriber#maybeInitializeSubscription","LocationEventEmitter.addListener$argument_1","Subscriber#registerCallback","Subscriber#registerCallbackForId","Subscriber#unregisterCallback","Subscriber#trigger","_getCurrentWatchId"],"mappings":"AAA;ACG;ICK;KDG;IEC;kFCI,8BD;KFC;III;KJK;IKM;KLK;IMI;KNW;IOC;KPS;CDC;OSO;CTE"},"hasCjsExports":false},"type":"js/module"}]}