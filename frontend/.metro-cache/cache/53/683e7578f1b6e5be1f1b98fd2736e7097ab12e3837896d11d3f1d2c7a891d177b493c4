{"dependencies":[{"name":"stream","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":1,"column":13,"index":13},"end":{"line":1,"column":30,"index":30}}],"key":"ywjhWBPQUrHXIfwGsbgNg7Szt/A=","exportNames":["*"],"imports":1}},{"name":"util","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":2,"column":11,"index":50},"end":{"line":2,"column":26,"index":65}}],"key":"plO20G0zye191TqKMAMeOagk9EI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var Stream = require(_dependencyMap[0], \"stream\").Stream;\n  var util = require(_dependencyMap[1], \"util\");\n  module.exports = DelayedStream;\n  function DelayedStream() {\n    this.source = null;\n    this.dataSize = 0;\n    this.maxDataSize = 1024 * 1024;\n    this.pauseStream = true;\n    this._maxDataSizeExceeded = false;\n    this._released = false;\n    this._bufferedEvents = [];\n  }\n  util.inherits(DelayedStream, Stream);\n  DelayedStream.create = function (source, options) {\n    var delayedStream = new this();\n    options = options || {};\n    for (var option in options) {\n      delayedStream[option] = options[option];\n    }\n    delayedStream.source = source;\n    var realEmit = source.emit;\n    source.emit = function () {\n      delayedStream._handleEmit(arguments);\n      return realEmit.apply(source, arguments);\n    };\n    source.on('error', function () {});\n    if (delayedStream.pauseStream) {\n      source.pause();\n    }\n    return delayedStream;\n  };\n  Object.defineProperty(DelayedStream.prototype, 'readable', {\n    configurable: true,\n    enumerable: true,\n    get: function () {\n      return this.source.readable;\n    }\n  });\n  DelayedStream.prototype.setEncoding = function () {\n    return this.source.setEncoding.apply(this.source, arguments);\n  };\n  DelayedStream.prototype.resume = function () {\n    if (!this._released) {\n      this.release();\n    }\n    this.source.resume();\n  };\n  DelayedStream.prototype.pause = function () {\n    this.source.pause();\n  };\n  DelayedStream.prototype.release = function () {\n    this._released = true;\n    this._bufferedEvents.forEach(function (args) {\n      this.emit.apply(this, args);\n    }.bind(this));\n    this._bufferedEvents = [];\n  };\n  DelayedStream.prototype.pipe = function () {\n    var r = Stream.prototype.pipe.apply(this, arguments);\n    this.resume();\n    return r;\n  };\n  DelayedStream.prototype._handleEmit = function (args) {\n    if (this._released) {\n      this.emit.apply(this, args);\n      return;\n    }\n    if (args[0] === 'data') {\n      this.dataSize += args[1].length;\n      this._checkIfMaxDataSizeExceeded();\n    }\n    this._bufferedEvents.push(args);\n  };\n  DelayedStream.prototype._checkIfMaxDataSizeExceeded = function () {\n    if (this._maxDataSizeExceeded) {\n      return;\n    }\n    if (this.dataSize <= this.maxDataSize) {\n      return;\n    }\n    this._maxDataSizeExceeded = true;\n    var message = 'DelayedStream#maxDataSize of ' + this.maxDataSize + ' bytes exceeded.';\n    this.emit('error', new Error(message));\n  };\n});","lineCount":86,"map":[[2,2,1,0],[2,6,1,4,"Stream"],[2,12,1,10],[2,15,1,13,"require"],[2,22,1,20],[2,23,1,20,"_dependencyMap"],[2,37,1,20],[2,50,1,29],[2,51,1,30],[2,52,1,31,"Stream"],[2,58,1,37],[3,2,2,0],[3,6,2,4,"util"],[3,10,2,8],[3,13,2,11,"require"],[3,20,2,18],[3,21,2,18,"_dependencyMap"],[3,35,2,18],[3,46,2,25],[3,47,2,26],[4,2,4,0,"module"],[4,8,4,6],[4,9,4,7,"exports"],[4,16,4,14],[4,19,4,17,"DelayedStream"],[4,32,4,30],[5,2,5,0],[5,11,5,9,"DelayedStream"],[5,24,5,22,"DelayedStream"],[5,25,5,22],[5,27,5,25],[6,4,6,2],[6,8,6,6],[6,9,6,7,"source"],[6,15,6,13],[6,18,6,16],[6,22,6,20],[7,4,7,2],[7,8,7,6],[7,9,7,7,"dataSize"],[7,17,7,15],[7,20,7,18],[7,21,7,19],[8,4,8,2],[8,8,8,6],[8,9,8,7,"maxDataSize"],[8,20,8,18],[8,23,8,21],[8,27,8,25],[8,30,8,28],[8,34,8,32],[9,4,9,2],[9,8,9,6],[9,9,9,7,"pauseStream"],[9,20,9,18],[9,23,9,21],[9,27,9,25],[10,4,11,2],[10,8,11,6],[10,9,11,7,"_maxDataSizeExceeded"],[10,29,11,27],[10,32,11,30],[10,37,11,35],[11,4,12,2],[11,8,12,6],[11,9,12,7,"_released"],[11,18,12,16],[11,21,12,19],[11,26,12,24],[12,4,13,2],[12,8,13,6],[12,9,13,7,"_bufferedEvents"],[12,24,13,22],[12,27,13,25],[12,29,13,27],[13,2,14,0],[14,2,15,0,"util"],[14,6,15,4],[14,7,15,5,"inherits"],[14,15,15,13],[14,16,15,14,"DelayedStream"],[14,29,15,27],[14,31,15,29,"Stream"],[14,37,15,35],[14,38,15,36],[15,2,17,0,"DelayedStream"],[15,15,17,13],[15,16,17,14,"create"],[15,22,17,20],[15,25,17,23],[15,35,17,32,"source"],[15,41,17,38],[15,43,17,40,"options"],[15,50,17,47],[15,52,17,49],[16,4,18,2],[16,8,18,6,"delayedStream"],[16,21,18,19],[16,24,18,22],[16,28,18,26],[16,32,18,30],[16,33,18,31],[16,34,18,32],[17,4,20,2,"options"],[17,11,20,9],[17,14,20,12,"options"],[17,21,20,19],[17,25,20,23],[17,26,20,24],[17,27,20,25],[18,4,21,2],[18,9,21,7],[18,13,21,11,"option"],[18,19,21,17],[18,23,21,21,"options"],[18,30,21,28],[18,32,21,30],[19,6,22,4,"delayedStream"],[19,19,22,17],[19,20,22,18,"option"],[19,26,22,24],[19,27,22,25],[19,30,22,28,"options"],[19,37,22,35],[19,38,22,36,"option"],[19,44,22,42],[19,45,22,43],[20,4,23,2],[21,4,25,2,"delayedStream"],[21,17,25,15],[21,18,25,16,"source"],[21,24,25,22],[21,27,25,25,"source"],[21,33,25,31],[22,4,27,2],[22,8,27,6,"realEmit"],[22,16,27,14],[22,19,27,17,"source"],[22,25,27,23],[22,26,27,24,"emit"],[22,30,27,28],[23,4,28,2,"source"],[23,10,28,8],[23,11,28,9,"emit"],[23,15,28,13],[23,18,28,16],[23,30,28,27],[24,6,29,4,"delayedStream"],[24,19,29,17],[24,20,29,18,"_handleEmit"],[24,31,29,29],[24,32,29,30,"arguments"],[24,41,29,39],[24,42,29,40],[25,6,30,4],[25,13,30,11,"realEmit"],[25,21,30,19],[25,22,30,20,"apply"],[25,27,30,25],[25,28,30,26,"source"],[25,34,30,32],[25,36,30,34,"arguments"],[25,45,30,43],[25,46,30,44],[26,4,31,2],[26,5,31,3],[27,4,33,2,"source"],[27,10,33,8],[27,11,33,9,"on"],[27,13,33,11],[27,14,33,12],[27,21,33,19],[27,23,33,21],[27,35,33,32],[27,36,33,33],[27,37,33,34],[27,38,33,35],[28,4,34,2],[28,8,34,6,"delayedStream"],[28,21,34,19],[28,22,34,20,"pauseStream"],[28,33,34,31],[28,35,34,33],[29,6,35,4,"source"],[29,12,35,10],[29,13,35,11,"pause"],[29,18,35,16],[29,19,35,17],[29,20,35,18],[30,4,36,2],[31,4,38,2],[31,11,38,9,"delayedStream"],[31,24,38,22],[32,2,39,0],[32,3,39,1],[33,2,41,0,"Object"],[33,8,41,6],[33,9,41,7,"defineProperty"],[33,23,41,21],[33,24,41,22,"DelayedStream"],[33,37,41,35],[33,38,41,36,"prototype"],[33,47,41,45],[33,49,41,47],[33,59,41,57],[33,61,41,59],[34,4,42,2,"configurable"],[34,16,42,14],[34,18,42,16],[34,22,42,20],[35,4,43,2,"enumerable"],[35,14,43,12],[35,16,43,14],[35,20,43,18],[36,4,44,2,"get"],[36,7,44,5],[36,9,44,7],[36,18,44,7,"get"],[36,19,44,7],[36,21,44,18],[37,6,45,4],[37,13,45,11],[37,17,45,15],[37,18,45,16,"source"],[37,24,45,22],[37,25,45,23,"readable"],[37,33,45,31],[38,4,46,2],[39,2,47,0],[39,3,47,1],[39,4,47,2],[40,2,49,0,"DelayedStream"],[40,15,49,13],[40,16,49,14,"prototype"],[40,25,49,23],[40,26,49,24,"setEncoding"],[40,37,49,35],[40,40,49,38],[40,52,49,49],[41,4,50,2],[41,11,50,9],[41,15,50,13],[41,16,50,14,"source"],[41,22,50,20],[41,23,50,21,"setEncoding"],[41,34,50,32],[41,35,50,33,"apply"],[41,40,50,38],[41,41,50,39],[41,45,50,43],[41,46,50,44,"source"],[41,52,50,50],[41,54,50,52,"arguments"],[41,63,50,61],[41,64,50,62],[42,2,51,0],[42,3,51,1],[43,2,53,0,"DelayedStream"],[43,15,53,13],[43,16,53,14,"prototype"],[43,25,53,23],[43,26,53,24,"resume"],[43,32,53,30],[43,35,53,33],[43,47,53,44],[44,4,54,2],[44,8,54,6],[44,9,54,7],[44,13,54,11],[44,14,54,12,"_released"],[44,23,54,21],[44,25,54,23],[45,6,55,4],[45,10,55,8],[45,11,55,9,"release"],[45,18,55,16],[45,19,55,17],[45,20,55,18],[46,4,56,2],[47,4,58,2],[47,8,58,6],[47,9,58,7,"source"],[47,15,58,13],[47,16,58,14,"resume"],[47,22,58,20],[47,23,58,21],[47,24,58,22],[48,2,59,0],[48,3,59,1],[49,2,61,0,"DelayedStream"],[49,15,61,13],[49,16,61,14,"prototype"],[49,25,61,23],[49,26,61,24,"pause"],[49,31,61,29],[49,34,61,32],[49,46,61,43],[50,4,62,2],[50,8,62,6],[50,9,62,7,"source"],[50,15,62,13],[50,16,62,14,"pause"],[50,21,62,19],[50,22,62,20],[50,23,62,21],[51,2,63,0],[51,3,63,1],[52,2,65,0,"DelayedStream"],[52,15,65,13],[52,16,65,14,"prototype"],[52,25,65,23],[52,26,65,24,"release"],[52,33,65,31],[52,36,65,34],[52,48,65,45],[53,4,66,2],[53,8,66,6],[53,9,66,7,"_released"],[53,18,66,16],[53,21,66,19],[53,25,66,23],[54,4,68,2],[54,8,68,6],[54,9,68,7,"_bufferedEvents"],[54,24,68,22],[54,25,68,23,"forEach"],[54,32,68,30],[54,33,68,31],[54,43,68,40,"args"],[54,47,68,44],[54,49,68,46],[55,6,69,4],[55,10,69,8],[55,11,69,9,"emit"],[55,15,69,13],[55,16,69,14,"apply"],[55,21,69,19],[55,22,69,20],[55,26,69,24],[55,28,69,26,"args"],[55,32,69,30],[55,33,69,31],[56,4,70,2],[56,5,70,3],[56,6,70,4,"bind"],[56,10,70,8],[56,11,70,9],[56,15,70,13],[56,16,70,14],[56,17,70,15],[57,4,71,2],[57,8,71,6],[57,9,71,7,"_bufferedEvents"],[57,24,71,22],[57,27,71,25],[57,29,71,27],[58,2,72,0],[58,3,72,1],[59,2,74,0,"DelayedStream"],[59,15,74,13],[59,16,74,14,"prototype"],[59,25,74,23],[59,26,74,24,"pipe"],[59,30,74,28],[59,33,74,31],[59,45,74,42],[60,4,75,2],[60,8,75,6,"r"],[60,9,75,7],[60,12,75,10,"Stream"],[60,18,75,16],[60,19,75,17,"prototype"],[60,28,75,26],[60,29,75,27,"pipe"],[60,33,75,31],[60,34,75,32,"apply"],[60,39,75,37],[60,40,75,38],[60,44,75,42],[60,46,75,44,"arguments"],[60,55,75,53],[60,56,75,54],[61,4,76,2],[61,8,76,6],[61,9,76,7,"resume"],[61,15,76,13],[61,16,76,14],[61,17,76,15],[62,4,77,2],[62,11,77,9,"r"],[62,12,77,10],[63,2,78,0],[63,3,78,1],[64,2,80,0,"DelayedStream"],[64,15,80,13],[64,16,80,14,"prototype"],[64,25,80,23],[64,26,80,24,"_handleEmit"],[64,37,80,35],[64,40,80,38],[64,50,80,47,"args"],[64,54,80,51],[64,56,80,53],[65,4,81,2],[65,8,81,6],[65,12,81,10],[65,13,81,11,"_released"],[65,22,81,20],[65,24,81,22],[66,6,82,4],[66,10,82,8],[66,11,82,9,"emit"],[66,15,82,13],[66,16,82,14,"apply"],[66,21,82,19],[66,22,82,20],[66,26,82,24],[66,28,82,26,"args"],[66,32,82,30],[66,33,82,31],[67,6,83,4],[68,4,84,2],[69,4,86,2],[69,8,86,6,"args"],[69,12,86,10],[69,13,86,11],[69,14,86,12],[69,15,86,13],[69,20,86,18],[69,26,86,24],[69,28,86,26],[70,6,87,4],[70,10,87,8],[70,11,87,9,"dataSize"],[70,19,87,17],[70,23,87,21,"args"],[70,27,87,25],[70,28,87,26],[70,29,87,27],[70,30,87,28],[70,31,87,29,"length"],[70,37,87,35],[71,6,88,4],[71,10,88,8],[71,11,88,9,"_checkIfMaxDataSizeExceeded"],[71,38,88,36],[71,39,88,37],[71,40,88,38],[72,4,89,2],[73,4,91,2],[73,8,91,6],[73,9,91,7,"_bufferedEvents"],[73,24,91,22],[73,25,91,23,"push"],[73,29,91,27],[73,30,91,28,"args"],[73,34,91,32],[73,35,91,33],[74,2,92,0],[74,3,92,1],[75,2,94,0,"DelayedStream"],[75,15,94,13],[75,16,94,14,"prototype"],[75,25,94,23],[75,26,94,24,"_checkIfMaxDataSizeExceeded"],[75,53,94,51],[75,56,94,54],[75,68,94,65],[76,4,95,2],[76,8,95,6],[76,12,95,10],[76,13,95,11,"_maxDataSizeExceeded"],[76,33,95,31],[76,35,95,33],[77,6,96,4],[78,4,97,2],[79,4,99,2],[79,8,99,6],[79,12,99,10],[79,13,99,11,"dataSize"],[79,21,99,19],[79,25,99,23],[79,29,99,27],[79,30,99,28,"maxDataSize"],[79,41,99,39],[79,43,99,41],[80,6,100,4],[81,4,101,2],[82,4,103,2],[82,8,103,6],[82,9,103,7,"_maxDataSizeExceeded"],[82,29,103,27],[82,32,103,30],[82,36,103,34],[83,4,104,2],[83,8,104,6,"message"],[83,15,104,13],[83,18,105,4],[83,49,105,35],[83,52,105,38],[83,56,105,42],[83,57,105,43,"maxDataSize"],[83,68,105,54],[83,71,105,57],[83,89,105,75],[84,4,106,2],[84,8,106,6],[84,9,106,7,"emit"],[84,13,106,11],[84,14,106,12],[84,21,106,19],[84,23,106,21],[84,27,106,25,"Error"],[84,32,106,30],[84,33,106,31,"message"],[84,40,106,38],[84,41,106,39],[84,42,106,40],[85,2,107,0],[85,3,107,1],[86,0,107,2],[86,3]],"functionMap":{"names":["<global>","DelayedStream","DelayedStream.create","source.emit","source.on$argument_1","Object.defineProperty$argument_2.get","DelayedStream.prototype.setEncoding","DelayedStream.prototype.resume","DelayedStream.prototype.pause","DelayedStream.prototype.release","<anonymous>","DelayedStream.prototype.pipe","DelayedStream.prototype._handleEmit","DelayedStream.prototype._checkIfMaxDataSizeExceeded"],"mappings":"AAA;ACI;CDS;uBEG;gBCW;GDG;qBEE,aF;CFM;OKK;GLE;sCMG;CNE;iCOE;CPM;gCQE;CRE;kCSE;+BCG;GDE;CTE;+BWE;CXI;sCYE;CZY;sDaE;Cba"},"hasCjsExports":true},"type":"js/module"}]}